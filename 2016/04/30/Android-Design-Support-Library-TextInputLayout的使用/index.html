<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Android Design Support Library--TextInputLayout的使用"><meta name="keywords" content="Material Design,Google,TextInputLayout"><meta name="author" content="李牧羊,lin794653318@gmail.com"><meta name="copyright" content="李牧羊"><title>Android Design Support Library--TextInputLayout的使用 | 李牧羊</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: undefined
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#引言"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用方法"><span class="toc-number">2.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关于自定义样式"><span class="toc-number">3.</span> <span class="toc-text">关于自定义样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#最后"><span class="toc-number">4.</span> <span class="toc-text">最后</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://oasusatoz.bkt.clouddn.com/3-15052H1035cF.jpg"></div><div class="author-info__name text-center">李牧羊</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">22</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">39</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">4</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="http://litten.me/" target="_blank">litten</a><a class="author-info-links__name text-center" href="https://developer.android.com/index.html" target="_blank">Android Developer</a><a class="author-info-links__name text-center" href="http://blog.csdn.net/wei_smile" target="_blank">CSDN</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://ws1.sinaimg.cn/large/8700af19ly1fnp7q2phkzj21hc0xc0yl)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">李牧羊</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">主页</a><a class="site-page" href="/categories/Android/">移动开发</a><a class="site-page" href="/categories/Python/">爬虫</a><a class="site-page" href="/categories/茕独/">茕独</a><a class="site-page" href="/categories/前端开发/">前端开发</a></span></div><div id="post-info"><div id="post-title">Android Design Support Library--TextInputLayout的使用</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-04-30</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Android/">Android</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><p>Google在2015的IO大会上，给我们带来了更加详细的Material Design设计规范，同时，也给我们带来了全新的Android Design Support Library，Android Design Support Library的兼容性更广，直接可以向下兼容到Android 2.2，我准备从最简单的控件开始，逐渐延伸，把新控件都给熟悉一遍。<br><a id="more"></a><br>先从看起来最简单的控件开始，也就是<code>TextInputLayout</code>，说实话<code>TextInputLayout</code> 我所见到的平常用的并不多，它的大体作用是在我们正常的EditText左上角显示出一个浮动标签，这个标签的内容就是我们设置的<code>android:hint</code> 属性的值。<br>先来看一下它的继承结构：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_1.jpg" alt="继承结构"></p>
<p>可以很清晰的看到我们的<code>TextInputLayout</code> 继承于<code>LinearLayout</code> ，那么很明显这是一个布局，需要配合它的子控件来显示出想要的效果，这里谷歌把它专门设计用来包裹<code>EditText</code>(或者<code>EditText</code>的子类)，然后当用户进行输入动作的时候我们设置的<code>android:hint</code> 提示就会以动画的形式运动到左上角，谷歌官方提供的最简单的使用示例如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.TextInputLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.TextInputEditText</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:hint</span>=<span class="string">"@string/form_username"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.TextInputLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>有些人可能会奇怪，之前说好的<code>TextInputLayout</code> 是用来包裹<code>EditText</code> 的，为什么这里出现了<code>TextInputEditText</code> ，先别急，我们看一下谷歌官方对这个控件的描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A special sub-<span class="class"><span class="keyword">class</span> <span class="title">of</span> <span class="title">EditText</span> <span class="title">designed</span> <span class="title">for</span> <span class="title">use</span> <span class="title">as</span> <span class="title">a</span> <span class="title">child</span> <span class="title">of</span> <span class="title">TextInputLayout</span>.</span></div><div class="line"></div><div class="line"><span class="title">Using</span> <span class="title">this</span> <span class="title">class</span> <span class="title">allows</span> <span class="title">us</span> <span class="title">to</span> <span class="title">display</span> <span class="title">a</span> <span class="title">hint</span> <span class="title">in</span> <span class="title">the</span> <span class="title">IME</span> <span class="title">when</span> <span class="title">in</span> '<span class="title">extract</span>' <span class="title">mode</span>.</div></pre></td></tr></table></figure>
<p>大意是说，这只是一种特殊的<code>EditText</code> 的子类，用来在<code>&#39;extract&#39; mode</code> 下在输入法编辑器中显示我们的<code>hint</code>提示信息，这里的<code>&#39;extract&#39; mode</code> 其实就是全屏模式，谷歌官方对它的解释是有时候你的输入框的UI界面很大，大的不能与你自己的应用程序的UI结合起来，这时候就可以切换到全屏模式来输入，这么说可能不太明白，上图：<br>比如说，下面这种情况使用的是<code>EditText</code>：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_2.jpg" alt="使用EditText"></p>
<p>我们看到下面那里输入框已经很大了，然后你点击输入框进行输入，会发现这个现象：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_3.jpg" alt="点击输入"></p>
<p>你进入到了全屏模式输入，但是界面上空空如也，对比一下使用<code>TextInputEditText</code> 的情况：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_4.jpg" alt="使用TextInputEditText"></p>
<p>看到左上角的文字了嘛，这是我们在之前设置的<code>android:hint</code> 属性的值，这么一看这两者的区别的就一目了然了，但是说实话<code>TextInputEditText</code> 用到的地方还是很有限的，所以日常开发我们还是使用<code>TextInputLayout</code> 去包裹<code>EditText</code> 来实现浮动标签的功能。</p>
<blockquote>
<p><a href="http://stackoverflow.com/questions/35775919/edittext-added-is-not-a-textinputedittext-please-switch-to-using-that-class-ins" target="_blank" rel="external"><strong>以上图片出处</strong></a> 感谢万能的<strong>stackoverflow</strong></p>
</blockquote>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><p>因为它是继承自<code>LinearLayout</code>的所以理论上<code>LinearLayout</code> 有的属性它全都有，这里我们只看有关它本身的属性：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>相关方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>app:counterEnabled</td>
<td>setCounterEnabled(boolean)</td>
<td>设置是否显示一个计数器，布尔值</td>
</tr>
<tr>
<td>app:counterMaxLength</td>
<td>setCounterMaxLength(int)</td>
<td>设置计数器的最大计数数值，整型</td>
</tr>
<tr>
<td>app:errorEnabled</td>
<td>setErrorEnabled(boolean)</td>
<td>设置是否显示一个错误信息，布尔值</td>
</tr>
<tr>
<td>app:hintAnimationEnabled</td>
<td>setHintAnimationEnabled(boolean)</td>
<td>设置是否要显示输入状态时候的动画效果，布尔值</td>
</tr>
<tr>
<td>app:hintEnabled</td>
<td>setHintEnabled(boolean)</td>
<td>设置是否要用这个浮动标签的功能，布尔值</td>
</tr>
<tr>
<td>app:hintTextAppearance</td>
<td>setHintTextAppearance(int)</td>
<td>设置提示文字的样式(注意这里是运行了动画效果之后的样式)</td>
</tr>
</tbody>
</table>
<hr>
<p>这里我们通过一个简单的Demo来了解以上这些属性，简单起见我们就做一个登录界面，这个界面长这样：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_5.jpg" alt="这里写图片描述登录界面"></p>
<p>先上布局文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:paddingLeft</span>=<span class="string">"@dimen/activity_horizontal_margin"</span></div><div class="line">    <span class="attr">android:paddingRight</span>=<span class="string">"@dimen/activity_horizontal_margin"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">"com.test.textinputlayoutdemo.MainActivity"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"65dp"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.TextInputLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/layout_name"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">app:counterEnabled</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">app:counterMaxLength</span>=<span class="string">"5"</span></div><div class="line">            <span class="attr">app:counterOverflowTextAppearance</span>=<span class="string">"@style/MyOverflowText"</span></div><div class="line">            <span class="attr">app:errorTextAppearance</span>=<span class="string">"@style/MyErrorStyle"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/input_name"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:hint</span>=<span class="string">"@string/EnterName"</span></div><div class="line">                <span class="attr">android:singleLine</span>=<span class="string">"true"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.TextInputLayout</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.TextInputLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/layout_password"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">app:counterEnabled</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">app:counterMaxLength</span>=<span class="string">"11"</span></div><div class="line">            <span class="attr">app:counterOverflowTextAppearance</span>=<span class="string">"@style/MyOverflowText"</span></div><div class="line">            <span class="attr">app:errorTextAppearance</span>=<span class="string">"@style/MyErrorStyle"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/input_password"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:hint</span>=<span class="string">"@string/EnterPassWord"</span></div><div class="line">                <span class="attr">android:inputType</span>=<span class="string">"textPassword"</span></div><div class="line">                <span class="attr">android:singleLine</span>=<span class="string">"true"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.TextInputLayout</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.TextInputLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/layout_email"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">app:counterOverflowTextAppearance</span>=<span class="string">"@style/MyOverflowText"</span></div><div class="line">            <span class="attr">app:errorTextAppearance</span>=<span class="string">"@style/MyErrorStyle"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/input_email"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:hint</span>=<span class="string">"@string/EnterEmail"</span></div><div class="line">                <span class="attr">android:inputType</span>=<span class="string">"textEmailAddress"</span></div><div class="line">                 /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.TextInputLayout</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/login"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"50dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"@string/login"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#ffffff"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></div><div class="line">            <span class="attr">android:textStyle</span>=<span class="string">"bold"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> EditText input_name, input_password, input_email;</div><div class="line">    <span class="keyword">private</span> TextInputLayout layout_name, layout_password, layout_email;</div><div class="line">    <span class="keyword">private</span> Button btn_login;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        initWidget();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initWidget</span><span class="params">()</span> </span>&#123;</div><div class="line">        input_name = (EditText) findViewById(R.id.input_name);</div><div class="line">        input_password = (EditText) findViewById(R.id.input_password);</div><div class="line">        input_email = (EditText) findViewById(R.id.input_email);</div><div class="line"></div><div class="line">        layout_name = (TextInputLayout) findViewById(R.id.layout_name);</div><div class="line">        layout_password = (TextInputLayout) findViewById(R.id.layout_password);</div><div class="line">        layout_email = (TextInputLayout) findViewById(R.id.layout_email);</div><div class="line"></div><div class="line">        btn_login = (Button) findViewById(R.id.login);</div><div class="line">        btn_login.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        <span class="comment">//添加监听</span></div><div class="line">        input_name.addTextChangedListener(<span class="keyword">new</span> MyTextWatcher(input_name));</div><div class="line">        input_password.addTextChangedListener(<span class="keyword">new</span> MyTextWatcher(input_password));</div><div class="line">        input_email.addTextChangedListener(<span class="keyword">new</span> MyTextWatcher(input_email));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">            <span class="keyword">case</span> R.id.login:</div><div class="line">                canLogin();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 判断是否可以登录的方法</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">canLogin</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!isNameValid()) &#123;</div><div class="line">            Toast.makeText(<span class="keyword">this</span>, getString(R.string.check), Toast.LENGTH_SHORT).show();</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!isPasswordValid()) &#123;</div><div class="line">            Toast.makeText(<span class="keyword">this</span>, getString(R.string.check), Toast.LENGTH_SHORT).show();</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!isEmailValid()) &#123;</div><div class="line">            Toast.makeText(<span class="keyword">this</span>, getString(R.string.check), Toast.LENGTH_SHORT).show();</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        Toast.makeText(<span class="keyword">this</span>, getString(R.string.login_success), Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNameValid</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (input_name.getText().toString().trim().equals(<span class="string">""</span>) || input_name.getText().toString().trim().isEmpty()) &#123;</div><div class="line">            layout_name.setError(getString(R.string.error_name));</div><div class="line">            input_name.requestFocus();</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        layout_name.setErrorEnabled(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPasswordValid</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (input_password.getText().toString().trim().equals(<span class="string">""</span>) || input_password.getText().toString().trim().isEmpty()) &#123;</div><div class="line">            layout_password.setErrorEnabled(<span class="keyword">true</span>);</div><div class="line">            layout_password.setError(getResources().getString(R.string.error_password));</div><div class="line">            input_password.requestFocus();</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        layout_password.setErrorEnabled(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmailValid</span><span class="params">()</span> </span>&#123;</div><div class="line">        String email = input_email.getText().toString().trim();</div><div class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(email) || !android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) &#123;</div><div class="line">            layout_email.setErrorEnabled(<span class="keyword">true</span>);</div><div class="line">            layout_email.setError(getString(R.string.error_email));</div><div class="line">            layout_email.requestFocus();</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        layout_email.setErrorEnabled(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//动态监听输入过程</span></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTextWatcher</span> <span class="keyword">implements</span> <span class="title">TextWatcher</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">private</span> View view;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="title">MyTextWatcher</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.view = view;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> count, <span class="keyword">int</span> after)</span> </span>&#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> before, <span class="keyword">int</span> count)</span> </span>&#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterTextChanged</span><span class="params">(Editable s)</span> </span>&#123;</div><div class="line">            <span class="keyword">switch</span> (view.getId()) &#123;</div><div class="line">                <span class="keyword">case</span> R.id.input_name:</div><div class="line">                    isNameValid();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> R.id.input_password:</div><div class="line">                    isPasswordValid();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> R.id.input_email:</div><div class="line">                    isEmailValid();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>先来看一下最终的实现效果：</p>
<p><img src="http://oasusatoz.bkt.clouddn.com/TextInput_6.gif" alt="实现效果"></p>
<p>可以很明显的看到，当我们同时设置了<code>app:counterEnabled</code> 和<code>app:counterMaxLength</code> 属性时，我们输入的<code>EditText</code> 右下角会出现一个计数器还有一个最大输入字符数的数字显示，我们在输入名字这一栏设置最大输入为5个字符，所以当超过了5个字符的时候，<code>EditText</code> 的整个样式的颜色都会改变以示警告，如果我们只设置了<code>app:counterEnabled</code> 属性的话<code>EditText</code> 右下角一开始会出现一个0，随着输入字符的增多而逐步进行计数，注意如果设置了整个属性我们<code>EditText</code> 布局的高度会有一定的增大，具体的可以自己实践一下。</p>
<p>另外，我们在代码中设置了不同的饿输入类型，如果输入类型错误，我们就可以通过设置<code>app:errorEnabled</code> 来开启错误显示，此时需要通过在代码中调用 <code>setError(string)</code> 方法来设置显示的错误提示文字，当不需要的时候记得设置<code>app:errorEnabled(false)</code> 来取消错误提示，不然错误提示会一直存在。</p>
<p><strong>注意：</strong> 当我们使用<code>app:counterMaxLength</code> 这个属性的时候，一定要设置 <code>app:counterOverflowTextAppearance</code> 属性，不然的话程序运行会报错，这个属性是设置当我们输入字符超过限定的个数时候<code>EditText</code>控件整体显示的样式，需要在style.xml文件里面定义一个自己的style，注意我们自定义的style的parent是<code>TextAppearance.AppCompat.Small</code> ，拿我上面的程序举例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"MyOverflowText"</span> <span class="attr">parent</span>=<span class="string">"TextAppearance.AppCompat.Small"</span>&gt;</span><span class="xml"></span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColor"</span>&gt;</span>#f3672b<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这样定义好后再在<code>app:counterOverflowTextAppearance</code> 里面设置这个style就行</p>
<h4 id="关于自定义样式"><a href="#关于自定义样式" class="headerlink" title="关于自定义样式"></a>关于自定义样式</h4><p>有些人可能不喜欢官方提供的默认样式想要自己定义，下面说一下自定义几种样式的方法：</p>
<ul>
<li>如果你想更改下划线的颜色，只要在style.xml文件里面找到AppTheme：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">       <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>更改里面的colorAccent属性就行了</p>
<ul>
<li>如果你想更改错误提示的样式的话，也是在style.xml文件里面，自定义一个style，同样拿上面的程序举例：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"MyErrorStyle"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColor"</span>&gt;</span>#ec4722<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后在xml文件<code>TextInputLayout</code>控件里面这么设置一下就行了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app:errorTextAppearance=&quot;@style/MyErrorStyle&quot;</div></pre></td></tr></table></figure>
<p>包括前面提到的设置当输入字符大于我们限定个数字符时的样式，基本上我们可以很好地自定义出自己想要的style了，以上两种不提供演示，都很简单，可以自己去尝试。</p>
<h4 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h4><p>下一次准备分析SnackBar控件，很多东西说简单也简单，说不简单也不简单，就像做这个Demo我之前光看官方文档根本没有告诉有<code>app:counterOverflowTextAppearance</code> 这个属性的存在，也是一直查资料，还是要亲自去尝试一下才好，下面上源码(注意是AS文件)</p>
<p>参考：<a href="http://www.androidhive.info/2015/09/android-material-design-floating-labels-for-edittext/" target="_blank" rel="external"><strong>Android Material Design Floating Labels for EditText</strong></a></p>
<p><a href="https://github.com/GiitSmile/TextInputLayoutDemo/tree/master" target="_blank" rel="external"><strong>项目GitHub地址</strong></a></p>
<p>最后来个小提示，当我们在Android Studio中导入support design开发包的时候，版本号最好和v7包的版本号一致，不然有些时候会出现莫名其妙的错误：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line"><span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:23.0.1'</span></div><div class="line"><span class="keyword">compile</span> <span class="string">'com.android.support:design:23.0.1'</span></div></pre></td></tr></table></figure>
<p>有任何问题欢迎留言探讨~</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:lin794653318@gmail.com">李牧羊</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https:///www.limuyang.cc/2016/04/30/Android-Design-Support-Library-TextInputLayout的使用/">https:///www.limuyang.cc/2016/04/30/Android-Design-Support-Library-TextInputLayout的使用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https:///www.limuyang.cc" target="_blank">李牧羊</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Material-Design/">Material Design</a><a class="post-meta__tags" href="/tags/Google/">Google</a><a class="post-meta__tags" href="/tags/TextInputLayout/">TextInputLayout</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="http://oasusatoz.bkt.clouddn.com/weixin.png"><div class="post-qr-code__desc">谢谢你请我吃糖果</div></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2016/05/03/译Android-Design-Support-Library-使用CoordinatorLayout来处理滚动/"><i class="fa fa-chevron-left">  </i><span>译Android Design Support Library--使用CoordinatorLayout来处理滚动</span></a></div><div class="next-post pull-right"><a href="/2016/04/16/使用ViewPager动画来做出不一样的引导页/"><span>使用ViewPager动画来做出不一样的引导页</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2018 By 李牧羊</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>